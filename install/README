#############################################################################
# phpDiveLog                                    (c) 2004 by Itzchak Rehberg #
# written by Itzchak Rehberg <izzysoft@qumran.org>                          #
# http://www.qumran.org/homes/izzy/                                         #
# ------------------------------------------------------------------------- #
# This program is free software; you can redistribute and/or modify it      #
# under the terms of the GNU General Public License (see doc/LICENSE)       #
# ------------------------------------------------------------------------- #
# Basic information                                                         #
#############################################################################

This README was created for phpDiveLog v0.1.0 - and since you may know that
programmers are lazy doc writers, not all points may be up-to-date any more.
In this case, please forgive (and notify) me!

===============================================================================

TOC
---
1) What is phpDiveLog?
2) Requirements
3) Installation
4) Placing fotos with your dives/sites
5) Localization
6) The web page - multi user issues
7) CopyRight
8) Disclaimer
9) More information

===============================================================================

1) What is phpDiveLog?
----------------------
phpDiveLog displays the information of your Aqua DiveLog LogBook based on CSV
files you generate with the Java Conduit shipped with Aqua DiveLog. Due to
the restrictions of that conduit, some data need to be included statically -
plus we have to run the conduit twice to retrieve all data (since only one
CSV file is supported by the divelog.ini of v0.98). These restrictions will
be removed with the next release of Aqua DiveLog.

As for now, phpDiveLog offers you no features to edit these data. But it
provides you with 3 tabs to display...
- ...the DiveLogBook. Here you browse through the list of your dives (in the
  config file, you may specify how many entries should be displayed per page).
  For detailed information, a click on the dive# brings you directly to the log
  books entry.
- ...the Dive Statistics, which show you some basic stats about your dives,
  such as max/avg depth and divetime etc.
- ...the Dive Sites Information, which provides you with a list of your dive
  sites. Again, a click on the site# brings you to the details page

===============================================================================

2) Requirements
---------------
For data conversion from Aqua DiveLog you neet to have a Java interpreter
installed (refer to the Aqua DiveLog documentation for details).
phpDiveLog itself only requires a running web server with PHP4 support.

===============================================================================

3) Installation
---------------
See the file INSTALL (which should reside in the same directory as this file
you are reading now) for a detailed installation description. The short variant
for the impatient:
- ADL: copy the contents of the install/adl/template/ dir to ADLs template/ dir
  and the contents of the install/adl/ dir to ADLs directory. Then adjust the
  settings for TablePDBFile and DivePDBFile in the divelog.ini, plus PDLBASE
  in the divelog_conduit.sh
- PDL: copy everything except the install/ subdir into your web tree and then
  check the inc/config.inc file for parameters you may want to adjust. Create
  your own diver profile by copying the diver/demo directory to
  diver/<your_nick_here>, directory structure only. This directory you should
  specify as PDLBASE in the ADL divelog_conduit.sh. Optionally set up the
  system.conf and diver.conf files in this directory.
- Data transfer: if both sides are configured, just run the divelog_conduit.sh
  once - then point your browser to
  http://<your_server>/<PDL_URL>/index.php?diver=<your_nick_here>

===============================================================================

4) Placing fotos with your dives/sites
--------------------------------------
You can advise phpDiveLog to display fotos connected to your dives and/or
divesites. PDL searches two special directories for these images: the
diver/<nickname>/fotos/dive/ directory for pictures related to dives, and
diver/<nickname>/fotos/site/ for divesite related images. It recognizes the
Jpg, Gif and Png image types as valid. Descriptions are to be placed in *.txt
files having the same name as the image they describe.

The naming conventions are taken from the Aqua DiveLog specifications: all
dive images have the name "diveXXXXX-YYY.*", while the site images are to
be named "siteXXXX-YYY.txt" - where the XXXXX stand for the 5-digit dive
or rather site number (zero-padded from the left, e.g. "00025" for dive/site
number 25), and YYY for a 3-digit consecutive number of all images for the
related dive/site. With the first phpDiveLog is able to connect the images
with the according data records, using the latter you can define the order
the images are displayed.

Although you could specify an unlimited number of fotos per dive, for now
you should not use more than 3 or 4. Since phpDiveLog does no check on the
image count, you could render your page unreadable otherwise - since the
table gets too wide. I may fix this problem in the future, but no promise ;)

Things to consider:
- recommended size for these "thumbnails" is 192x144 pixel
- make the file extensions lower case (i.e. *.jpg|png|gif|txt)
- when re-numbering your dives, your fotos need to be renumbered accordingly
- if you want PDL to link the "thumbnail" to the original (larger) image,
  give the latter the same file name and place it into the "large" subdirectory
  of the directory the "thumbnail" was placed into

===============================================================================

5.) Localization
----------------

phpDiveLog now ships with language support for English, German and Russian. If
you want to localize it for your language: this should be very easy following
the steps described here.

The localization files are located in the lang/ subdirectory. The content has
to be conform with the UTF-8 charset. In order to create your own "locale file",
I assume Russian here as an example, you just have to...

- copy the trans.en file to trans.ru (extension is the ISO language code)
- open it with your favorite text editor (preferably one supporting UTF-8).
  The file is in simple CSV format: leave the first line and first column
  untouched, and just replace the translations. If the translation would look
  the same as the original from the lang.en file, simply delete the line;
  PDL falls back to English if the translation is not found. In fact, by
  deleting the line (instead of keeping the duplicate) the application may
  slightly be sped up since the setup process is shorter ;)
- save the file with UTF-8 encoding. If your editor does not support UTF-8,
  you need to convert the file to UTF-8 after saving it. On *nix systems you
  can use the "recode" command for it (see "man recode" for details).
- now you are done: since the new trans.ru file resides in the lang/
  directory, it will be found by PDL automagically. In your browser, go to the
  preferences page - the language should show up in the list.

If you followed all these steps, and the language showed up but has no
"clickable area" (i.e. associated flag), you need to find an image of the
flag representing your language (size should be about 30x20 pixels) and copy
it into the templates/*/images/ directories. For our example, the file name
had to be lang_ru.jpg (it MUST be a jpeg file). Some additional flag images
already exist there for the languages I hope to have supported soon - with
your help!

If you created a new language file I would appreciate to receive a copy to
be included with future releases. Please send it to izzysoft@qumran.org

===============================================================================

6) The web page - multi user issues
-----------------------------------

If you now point your browser to the PDL start page, it needs to know whose
data you requested. This is done by adding the parameter "diver=<nickname>"
to the URL, so it would e.g. look like
"http://localhost/divelog/index.php?diver=zorro" for the divelog of zorro
(assuming, you created a divers account for "zorro" as described in the
installation instructions).

What happens if you ommit that parameter? PDL then does not know whose divelog
you want to browse. Depending on the setting of $default_page in your
inc/config.inc file, this can lead to two possible results:
- $default_page = "error": an error message is displayed to the visitor
  informing him/her about the problem and how to solve it (i.e. include the
  "diver=" parameter in the URL)
- $default_page = "user": PDL will display the data of the user specified
  by the $default_user setting in your inc/config.inc.
This way you can set up PDL to always display your own divelog by default
(useful e.g. for single user installation) by just setting the $default_user
to your nick name used with PDL.

In some future version, I may add the option "index" to the $default_page
parameter. This would then list up all available divers with their nicks
(clickable) and maybe some additional information - while the diver can decide
whether his/her log will be public or not with a special config file.

===============================================================================

7) CopyRight (and CopyLeft)
----------------------------

This nice piece of software is (c) 2004 by Itzchak Rehberg and IzzySoft, and is
protected by the GNU Public License Version 2 (GPL). In short, this means:
- you'll have the source code available
- you may run this program on as many machines as you want/have
- you may copy and distribute it as much as you want - as long as you don't
  take money for it (and keep all files together!)
- you may edit this code to fit your needs/wishes (please, let me know about
  improvements!)
- you may use this code for own applications - but they have to be released
  under GPL then as well.
For details, please read the file named LICENSE in the doc/ directory.
If you release this program e.g. in a bundle of software on CD/DVD, release
an article about this program etc, let the author know about this. Not that
you need an explicit permission (as long as you stick to the above terms,
especially the GPL) - you are even encouraged to do so. I just want to be
informed about the fact to be up-to-date about all PR taking place ;).

===============================================================================

8) Disclaimer
-------------

This program is provided "as is" with no warranty (see GPL Par. 11).
Especially this means, that the author is not responsible for any damages
caused by the use of this software - explicitly or implicitly. The only thing
I can guarantee you is: it will consume some disk space :)

===============================================================================

9) More Information
-------------------

...can be found on the phpDiveLog website: just point your browser to
http://www.qumran.org/homes/izzy/ - and in the left frame, in the software
block, click on "phpDiveLog".

===============================================================================

Now, have fun!

Izzy
(July 2004)
