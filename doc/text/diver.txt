#############################################################################
# phpDiveLog                                    (c) 2004 by Itzchak Rehberg #
# written by Itzchak Rehberg <izzysoft@qumran.org>                          #
# http://www.qumran.org/homes/izzy/                                         #
# ------------------------------------------------------------------------- #
# This program is free software; you can redistribute and/or modify it      #
# under the terms of the GNU General Public License (see doc/LICENSE)       #
# ------------------------------------------------------------------------- #
# Diver setup and configuration documentation                               #
#############################################################################
#===[ Diver & Dive Data ]============================[ Diver & Dive Data ]===

[title]
Placing fotos with your dives/sites and personal page

[text]
You can advise phpDiveLog to display fotos connected to your dives and/or
divesites. PDL searches two special directories for these images: the
<code>diver/&lt;nickname&gt;/fotos/dive/</code> directory for pictures related
to dives, and <code>diver/&lt;nickname&gt;/fotos/site/</code> for divesite
related images. It recognizes the Jpg, Gif and Png image types as valid.
Descriptions are to be placed in <code>*.txt</code> files having the same name
as the image they describe (see setup of the <code>demo</code> diver).

[text]
The naming conventions are taken from the Aqua DiveLog specifications: all
dive images have the name <code>diveXXXXX-YYY.*</code>, while the site images
are to be named <code>siteXXXX-YYY.txt</code> - where the <code>XXXXX</code>
stand for the 5-digit dive or rather site number (zero-padded from the left,
e.g. "00025" for dive/site number 25), and <code>YYY</code> for a 3-digit
consecutive number of all images for the related dive/site. With the first
phpDiveLog is able to connect the images with the according data records, using
the latter you can define the order the images are displayed.

[text]
For the personal page, the image files must reside in the
<code>diver/*/fotos/person/</code> directory and be named
<code>diverYYY.*</code>.

[text]
Things to consider:<ul>
<li>recommended size for these "thumbnails" is 192x144 pixel</li>
<li>make the file extensions lower case (i.e. *.jpg|png|gif|txt)</li>
<li>when re-numbering your dives, your fotos need to be renumbered accordingly</li>
<li>if you want PDL to link the "thumbnail" to the original (larger) image,
  give the latter the same file name and place it into the "large" subdirectory
  of the directory the "thumbnail" was placed into</li></ul>

[text]
More possibility of linking informations (not only images) with your dive
and/or dive site information as well as your personal page are to be found
below:

#===============================================================================

[title]
Using other external information sources

[text]
Since the data you may "capture" with your Aqua DiveLog application are somehow
limited in size and content, you may extend the "notes" fields for your dive
and site descriptions with phpDiveLog. This can be done in different ways:
[text]
<ul>
 <li>Using placeholders ("tags") in the notes fields with Aqua DiveLog
     (see below)</li>
 <li>Using "external notes files" special to phpDiveLog</li>
 <li>Doing both at the same time</li>
</ul>
Also your personal page can be enhanced with "external notes files".

[text]
I implemented the "external notes files" to save you the act of editing all
your dive/site notes with your PDA again. To create an external "notes" field,
simply place a plain text file named <code>diveXXXXX.txt</code> (for dive notes)
or <code>siteXXXXX.txt</code> (for site notes) in the <code>notes/</code>
subdirectory of your "diver home directory" (for the file name syntax see the
paragraph on placing fotos). This file may contain HTML formatings (e.g. for
&lt;B&gt;old or &lt;U&gt;nderlining) as well as all available "tags" (see below).
All newlines will be replaced by line breaks ("&lt;BR&gt;") to form paragraphs.

[text]
If you like to create localized versions of your notes, you can do so for all
languages that are directly supported by phpDiveLog (see the Setup page). For
these, name the files as described above plus add the language code to the end
of the filename, so it would be <code>*.txt.de</code> for a German, or
<code>*.txt.ru</code> for a Russian text. In these cases you should ensure that
the default file (without the language code) also exists, since the localized
versions would only be displayed if the visitor has the given language selected
on the Setup page. To ensure this, you can make use of symbolic links. If you
e.g. have a German and an English description, you could either place the
English one as <code>*.txt</code> and the German one as <code>*.txt.de</code> -
or name the English one <code>*.txt.en</code> and create an additional
symbolic link using the <code>ln -s &lt;name of the English file&gt;
&lt;name of the English file without the ".en"&gt;</code> command.

[text]
These files will automatically be appended to your notes field, if they exist.
Additionally it should be said that you shouldn't use HTML formating to
extensive (e.g. by changing background colors etc.) to not mess up the general
design of the site.

[text]
For the personal page it works similiarly - but here we consider just the
<code>diver.txt[.&lt;lang&gt;]</code> file(s) in the divers "home directory",
i.e. the directory where the divers <code>system.conf</code> and
<code>diver.conf</code> reside.

#===============================================================================

[title]
Placeholders ("tags") in your dive[site] notes

[text]
You may include additional information like pictures or external (plain text)
files into your notes by using special tags which are then replaced when
phpDiveLog parses your DiveLog information for display. This way you can include
images and point to additional information on local and remote sites, or even
include other plain text/html files stored on the machine serving your PDL files.

[text]
Embedded links are enclosed by the <code>[url]</code> and <code>[/url]</code>
tags. Embedded images are enclosed by the <code>[img]</code> and <code>[/img]</code>
(left aligned) or <code>[imgr]</code> and <code>[/imgr]</code> (right aligned)
tags. External (text/html) files can be included by using the <code>[file]</code>
and <code>[/file]</code> tags, nesting of tags (i.e. using the tags in a file
included by the <code>[file]</code> tag, and using images as anchors for URLs)
is possible. Everything from the opening to the closing tag (including the tags
themselves) has to be on the same line (i.e. the string must NOT contain any
line breaks). The syntax of the part between the tags is as follows, where
square brackets mark optional and angle brackets mandatory parts:

[text]
<table class="nav" align="center" border="0">
 <tr><td class="td_blank"><b>file</b></td>
   <td class="td_blank">&lt;location&gt;</td></tr>
 <tr><td class="td_blank"><b>url,img,imgr</b></td>
   <td class="td_blank">&lt;location&gt;[|&lt;description&gt;]</td></tr>
 <tr><td colspan="2"></td></tr>
 <tr><td class="td_blank"><b>location</b></td>
  <td class="td_blank">[root|protocol]&lt;file&gt;</td></tr>
 <tr><td class="td_blank"><b>description</b></td>
  <td class="td_blank">plain text</td></tr>
 <tr><td colspan="2"></td></tr>
 <tr><td class="td_blank"><b>root</b></td>
  <td class="td_blank">~dir[@&lt;buddy&gt;]<br><pre>
   where "dir" is: d = ...fotos/dive
                   s = ...fotos/site
                   p = ...fotos/person
                   t = diver/&lt;buddy&gt;/text</pre></td></tr>
 <tr><td colspan="2"></td></tr>
 <tr><td class="td_blank"><b>buddy</b></td>
  <td class="td_blank">nick of the buddy (= subdir under diver/) to refer to.
    If not specified, it is the own nick assumed.</td></tr>
 <tr><td class="td_blank"><b>file</b></td>
  <td class="td_blank">file name, optionally including directory names</td></tr>
 <tr><td class="td_blank"><b>protocol</b></td>
  <td class="td_blank">any browser supported protocol
    (e.g. "http://" or "ftp://")</td></tr>
</table>

[text]
You even can embed an image in an url to make it clickable - see the examples
below:

[text]
<table class="nav" align="center" border="0" width="90%">
 <tr><td class="td_blank"><b>Input:</b></td>
  <td class="td_blank">Look here: [url]http://somewhere.com[/url]</td></tr>
 <tr><td class="td_blank"><b>Output:</b></td>
  <td class="td_blank">Look here: <a HREF='http://somewhere.com/'
    TARGET='_blank'>http://somewhere.com/</a></td></tr>
 <tr><td class="td_blank"><b>Comment:</b></td>
  <td class="td_blank">Easy example - you just specify the URL, and you will
    see it clickable.</td></tr>

 <tr><td colspan="2"></td></tr>
 <tr><td class="td_blank"><b>Input:</b></td>
  <td class="td_blank">See the [url]~t@demo/sample.html|sample link[/url]: This
    is an &lt;b&gt;important&lt;/b&gt; example.</td></tr>
 <tr><td class="td_blank"><b>Output:</b></td>
  <td class="td_blank">See the <A HREF="diver/demo/text/sample.html"
    TARGET='_blank'>sample link</a>: This is an <b>important</b> example.</td></tr>
 <tr><td class="td_blank"><b>Comment:</b></td>
  <td class="td_blank">Like above, but you will see the DESCRIPTION ("sample
    link") clickable and linked to the target.</td></tr>

 <tr><td colspan="2"></td></tr>
 <tr><td class="td_blank"><b>Input:</b></td>
  <td class="td_blank">[img]~s@demo/site00011-002.jpg|Big cave![/img] All
    following text...</td></tr>
 <tr><td class="td_blank"><b>Output:</b></td>
  <td class="td_blank"><span CLASS='thumbnail-left'><img ALIGN='center'
    SRC='../diver/demo/fotos/site/site00011-002.jpg'><br>Big cave!</span>
    All following text...</td></tr>
 <tr><td class="td_blank"><b>Comment:</b></td>
  <td class="td_blank">This will result in a left-aligned image having a
    description ("Big cave!") centered below itself. "All following text..."
    will float around this block on the right hand side.</td></tr>

 <tr><td colspan="2"></td></tr>
 <tr><td class="td_blank"><b>Input:</b></td>
  <td class="td_blank">
    [url]http://www.padi.com/|[imgr]~d@demo/dive00014-003.jpg|Great Dive![/imgr][/url]
    Dive here - this is a great place to go...</td></tr>
 <tr><td class="td_blank"><b>Output:</b></td>
  <td class="td_blank"><a HREF='http://www.padi.com/'
    TARGET='_blank'><span CLASS='thumbnail-right'><img ALIGN='center'
    SRC='../diver/demo/fotos/dive/dive00014-003.jpg'><br>Great Dive!</span></a>
    Dive here - this is a great place to go...</td></tr>
 <tr><td class="td_blank"><b>Comment:</b></td>
  <td class="td_blank">Image will be right aligned with the description ("Great
    Site!") sticking centered underneath, while the text ("This is a great place
    to go...") flows left around it. Image and its description are linked to the
    target ("http://www.padi.com/")</td></tr>
</table>

#===============================================================================

[title]
The divers <code>system.conf</code>

[text]
Optionally, each diver can override some of the systems default settings by
putting a file named <code>system.conf</code> in his/her "home directory"
("home directory" refers to the <code>diver/&lt;nick&gt;/</code> subdirectory
of the phpDiveLog installation). The syntax of this file is easy: one parameter
per line in the form <code>var=value</code>. Empty lines and lines beginning
with a "#" are ignored. Which system defaults are allowed to be overriden is
defined in the <code>inc/config.inc</code> file by the parameter
<code>$allow_override</code> (see in the phpDiveLog configuration description
on the {install_page} page).

[text]
One additional parameter in the <code>system.conf</code> is <code>personal</code>.
It defines whether the diver wants to display his/her personal data (see
<code>diver.conf</code> below) or not. If this parameter is missing (or
commented out), noone will be able to browse them via the <code>person.php</code>
page, even if a complete <code>diver.conf</code> exists. The same applies if it
is set to "0". Set <code>personal = 1</code> if you want the page to be displayed.

[title]
The divers <code>diver.conf</code>

[text]
This file, if available, must reside in the same directory as the
<code>system.conf</code> file (see above). It is intended to provide data for
the divers personal page, i.e. name and place of living as well as certifications.

[text]
The <code>diver.conf</code> is divided into several blocks - block names are
encloses in square brackets. If you do not want to provide data for a specific
block at all, you may just completely remove it (or comment it out) at all.

[text]
The <code>[person]</code> block, as the name suggests contains the personal
data. Available options in this block are <code>name</code>, <code>firstname</code>,
<code>country</code>, <code>state</code>, <code>city</code> and <code>status</code>
(where <code>status</code> means your highest certification, e.g. AOWD, DM or
Instructor). You can include a photo of yours using the <code>foto</code> option
also available in this block. The image used here must be stored in the
<code>diver/*/fotos/person/</code> subdirectory. If you don't specify one, a
"dummy" will be used instead. If you want to omit something, just delete or
comment out that line. With the <code>buddylist</code> option you define whether
these personal data may be included in the buddy list (if enabled by the admin
in the <code>inc/config.inc</code>) by setting it to "1" - or not, by either
setting it to "0", commenting it out or removing that line completely.

[text]
With the <code>[certification]</code> block, there are stronger rules to
observe. Data for a certification must include the course (i.e. the
certification - makes no sense without ;) and may include the date and place
where it was gained. Thus we have three items that belong together, and we may
have multiple of this groups. So we group them together by arrays. The
consequence is you have to keep the three items together if they belong together,
and you must not miss the square brackets at the end of the options name. Plus
you have to include either none or all three options - if you don't want to
publish e.g. the date, just leave the parameter blank. Otherwise, if you
specify it for the next course, the parser will count it to the previous ;)
Available options in this block are <code>course[]</code>, <code>date[]</code>
and <code>place[]</code>.

[text]
To add more descriptive context, you can make use of other "external sources",
such as a text file in your diver "home directory". See "Using other external
sources" for details on this.

#===============================================================================

[title]
Data conversion and transfer

[text]
To have your Aqua DiveLog data transfered to the right directory, you may
want to set up <code>PDLBASE</code> in the conduit script accordingly (see
the {install_page} page). In order to get your web installation running with
useful data, you now only need to change to the conduit directory and run the
<code>divelog_conduit.sh</code> script. Provided you followed all above steps
carefully, your dive data should then be displayed when you invoke the URL to
your PDL installation. The administrator of the PDL web site will provide you
with the server-side data (login, password, directory and transfer method).

[text]
If the site admin informs you that the "single OS user transfer" is used, you
need one additional step after running the conduit wrapper transfer: on your
divelov web site, click the import button, fill in your password, and submit
the form to finally import your divelog to the website. The password used here
will certainly be different from the one to use with your FTP/SCP/RSync
transfers, so don't mess them up!

[text]
If you re-organized some dive data (especially renumbering the dives and/or
sites), you may need to clean the <code>images/</code> directory (which contains
the dive profile images). I will think a bit about it - maybe I can include that
with the <code>divelog_conduit.sh</code> script to save you this work...

[eof]
